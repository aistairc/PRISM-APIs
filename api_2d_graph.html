<!doctype html>
<html lang=en>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css type=text/css>
<style>body{overflow:hidden;margin:0}text{font-family:sans-serif;pointer-events:all}</style>
<title>Disease Network Visualization</title>
</head>
<body>
<script src=https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/popper.js@1.14.0/dist/umd/popper.min.js></script>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/js/bootstrap.min.js></script>
<script type=text/javascript src=http://d3js.org/d3.v3.min.js></script>
<script type=text/javascript>const graph={{graph_data}};</script>
<script type=text/javascript>var w=window.innerWidth,h=window.innerHeight,focus_node=null,highlight_node=null,text_center=!1,outline=!1,min_score=0,max_score=1,color=d3.scale.linear().domain([min_score,(min_score+max_score)/2,10]).range(["orange","blue","green","yellow","black","grey"]),highlight_color="red",highlight_color_label="black",highlight_trans=.1,size=d3.scale.pow().exponent(1).domain([1,100]).range([8,24]),force=d3.layout.force().linkDistance(150).charge(-300).size([w,h]),default_node_color="#ccc",default_link_color="#888",nominal_base_node_size=5,nominal_text_size=10,max_text_size=14,nominal_stroke=.8,max_stroke=3.5,max_base_node_size=15,min_zoom=.1,max_zoom=10,svg=d3.select("body").append("svg").style("cursor","move"),zoom=d3.behavior.zoom().scaleExtent([min_zoom,max_zoom]),g=svg.append("g").attr("class","everything"),marker=g.append("defs").append("marker").attr("id","arrowhead").attr("viewBox","-0 -5 10 10").attr("refX",13).attr("refY",0).attr("orient","auto").attr("markerWidth",13).attr("markerHeight",13).attr("xoverflow","visible");marker.append("path").attr("d","M 0,-1.3 L 10 ,0 L 0,1.3").attr("fill","orange").style("stroke","none");var linkedByIndex={};function isConnected(e,t){return linkedByIndex[e.index+","+t.index]||linkedByIndex[t.index+","+e.index]||e.index==t.index}graph.links.forEach(function(e){linkedByIndex[e.source+","+e.target]=!0}),force.nodes(graph.nodes).links(graph.links).start();var link=g.selectAll(".link").data(graph.links).enter().append("line").attr("class","link").attr("marker-end","url(#arrowhead)").style("stroke-width",nominal_stroke).style("stroke",function(e){return isNumber(e.type)&&0<=e.type?color(e.type):default_link_color});link.append("title").text(function(e){return e.label});var edgepaths=g.selectAll(".edgepath").data(graph.links).enter().append("path").attr("class","edgepath").attr("fill-opacity",0).attr("stroke-opacity",0).attr("id",function(e,t){return"edgepath"+t}).style("pointer-events","all"),edgelabels=g.selectAll(".edgelabel").data(graph.links).enter().append("text").attr("class","edgelabel").attr("id",function(e,t){return"edgelabel"+t}).attr("font-size","8").attr("fill","transparent").style("pointer-events","all");edgelabels.append("textPath").attr("xlink:href",function(e,t){return"#edgepath"+t}).style("text-anchor","middle").style("pointer-events","all").attr("startOffset","50%").text(function(e){return e.label});var node=g.selectAll(".node").data(graph.nodes).enter().append("g").attr("class","node").call(force.drag);node.append("title").text(function(e){return e.id}),node.on("dblclick.zoom",function(e){d3.event.stopPropagation();var t=window.innerWidth/2-e.x*zoom.scale(),e=window.innerHeight/2-e.y*zoom.scale();zoom.translate([t,e]),g.attr("transform","translate("+t+","+e+")scale("+zoom.scale()+")")});var tocolor="fill",towhite="stroke";outline&&(tocolor="stroke",towhite="fill");var circle=node.append("path").attr("d",d3.svg.symbol().size(function(e){return Math.PI*Math.pow(size(e.type/2)||nominal_base_node_size,2)}).type(function(e){return e.type})).style(tocolor,function(e){return isNumber(e.type)&&0<=e.type?color(e.type):default_node_color}).style("stroke-width",nominal_stroke).style(towhite,"white"),text=g.selectAll(".text").data(graph.nodes).enter().append("text").on("mouseover",function(e,t){d3.select(this).text(e.name).on("click",function(){window.open(e.url)})}).attr("dy",".35em").style("font-size",nominal_text_size+"px").text(function(e){return"  "+e.name});function exit_highlight(){(highlight_node=null)===focus_node&&(svg.style("cursor","move"),"white"!=highlight_color&&(circle.style(towhite,"white"),text.style("font-weight","normal"),link.style("stroke",function(e){return isNumber(e.type)&&0<=e.type?color(e.type):default_link_color}),edgelabels.style("font-weight","normal")))}function set_focus(t){highlight_trans<1&&(circle.style("opacity",function(e){return isConnected(t,e)?1:highlight_trans}),text.style("opacity",function(e){return isConnected(t,e)?1:highlight_trans}),link.style("opacity",function(e){return e.source.index==t.index||e.target.index==t.index?1:highlight_trans}),edgelabels.style("opacity",function(e){return e.source.index==t.index||e.target.index==t.index?1:highlight_trans}))}function set_highlight(t){svg.style("cursor","pointer"),null!==focus_node&&(t=focus_node),highlight_node=t,"white"!==highlight_color&&(circle.style(towhite,function(e){return isConnected(t,e)?highlight_color:"white"}),text.style("font-weight",function(e){return isConnected(t,e)?"bold":"normal"}),link.style("stroke",function(e){return e.source.index==t.index||e.target.index==t.index?highlight_color:isNumber(e.type)&&0<=e.type?color(e.type):default_link_color}),edgelabels.style("stroke",function(e){return e.source.index==t.index||e.target.index==t.index?highlight_color_label:isNumber(e.type)&&0<=e.type?color(e.type):default_link_color}))}function resize(){var e=window.innerWidth,t=window.innerHeight;svg.attr("width",e).attr("height",t),force.size([force.size()[0]+(e-w)/zoom.scale(),force.size()[1]+(t-h)/zoom.scale()]).resume(),w=e,h=t}function isNumber(e){return!isNaN(parseFloat(e))&&isFinite(e)}node.on("mouseover",function(e){set_highlight(e)}).on("mousedown",function(e){d3.event.stopPropagation(),set_focus(focus_node=e),null===highlight_node&&set_highlight(e)}).on("mouseout",function(e){exit_highlight()}),d3.select(window).on("mouseup",function(){null!==focus_node&&(focus_node=null,highlight_trans<1&&(circle.style("opacity",1),text.style("opacity",1),link.style("opacity",1),edgelabels.style("opacity",0))),null===highlight_node&&exit_highlight()}),zoom.on("zoom",function(){var e=nominal_stroke;nominal_stroke*zoom.scale()>max_stroke&&(e=max_stroke/zoom.scale()),link.style("stroke-width",e),circle.style("stroke-width",e);var t=nominal_base_node_size;nominal_base_node_size*zoom.scale()>max_base_node_size&&(t=max_base_node_size/zoom.scale()),circle.attr("d",d3.svg.symbol().size(function(e){return Math.PI*Math.pow(size(e.size)*t/nominal_base_node_size||t,2)}).type(function(e){return e.type})),circle.attr("r",function(e){return size(e.size)*t/nominal_base_node_size||t}),text_center||text.attr("dx",function(e){return size(e.size)*t/nominal_base_node_size||t});e=nominal_text_size;nominal_text_size*zoom.scale()>max_text_size&&(e=max_text_size/zoom.scale()),text.style("font-size",e+"px"),g.attr("transform","translate("+d3.event.translate+")scale("+d3.event.scale+")")}),svg.call(zoom),resize(),window.focus(),force.on("tick",function(){node.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),text.attr("transform",function(e){return"translate("+e.x+","+e.y+")"}),link.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),node.attr("cx",function(e){return e.x}).attr("cy",function(e){return e.y}),edgepaths.attr("d",function(e){return"M "+e.source.x+" "+e.source.y+" L "+e.target.x+" "+e.target.y}),edgelabels.attr("transform",function(e){if(e.target.x<e.source.x){e=this.getBBox();return rx=e.x+e.width/2,ry=e.y+e.height/2,"rotate(180 "+rx+" "+ry+")"}return"rotate(0)"})});</script>
</body>
</html>
